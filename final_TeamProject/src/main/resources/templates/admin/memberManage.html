<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>제주다컴</title>
<meta charset="utf-8">
<style type="text/css">
.high_light {
	background: pink;
}
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript">
	$(function() {
		$("#headers").load("/header.html"); //헤더 인클루드
		//$("#footers").load("layout/footer.html");  		//푸터부분 인클루드

		$(".member_info").hover(function() {
			$(this).addClass("high_light");
		}, function() {
			$(this).removeClass("high_light");
		});

		$(".member_info").on("click", function() {

			var memberNo = $(this).find("td:eq(0)").text();;
			var data = {"memberNo":memberNo}
			$.ajax({
				url:"/admin/memberReviewList",
				dataType:"json",
				data:data,	
				success:function(reviewData){
					$(".review_info").empty();
					$.each(reviewData, function(){
						console.log(reviewData)
						var tr = $("<tr></tr>");
						$(tr).append( $("<td></td>").html( reviewData.reviewNo ));
						$(tr).append( $("<td></td>").html( reviewData.content ));
						$(tr).append( $("<td></td>").html( reviewData.category ));
						$(tr).append( $("<td></td>").html( reviewData.stars ));	
						$(".review_info").append(tr);
					});
				}
			});
		});

	});
</script>
</head>
<body>
	<div id="headers"></div>
	<!-- =============================================================================================================  -->

	<div class="container">
		<hr>
		<h2>관리자 페이지</h2>


		<h2>LIST</h2>

		<button type="button" onclick="location.href='/admin/memberManage'">문의사항관리</button>
		&nbsp;&nbsp;
		<button type="button" onclick="location.href='/admin/inquiryManage'">문의사항관리</button>
		&nbsp;&nbsp;
		<button type="button" onclick="location.href='/admin/productManage'">상품관리</button>

		<hr>

		<h2>회원목록</h2>

		<div class="search">
			<form action="/admin/memberManage" method="get">
				<select name="searchColumn" id="searchColumn">
					<option value="">== 검색 ==</option>
					<option value="memberNo">번호</option>
					<option value="name">이름</option>
					<option value="id">아이디</option>
					<option value="phone">전화번호</option>
				</select> <input type="search" name="keyword" id="keyword" /> <input
					type="submit" value="검색" />

			</form>
			<button id="btnReset">초기화</button>


		</div>
		<br>
		<div>
			<table id="memberList" border="1" width="70%">
				<thead>
					<tr>
						<th>번호</th>
						<th>이름</th>
						<th>아이디</th>
						<th>주소</th>
						<th>이메일</th>
						<th>전화번호</th>
						<th>포인트</th>
						<th>MBTI</th>
					</tr>
				</thead>
				<tbody>
					<tr class="member_info" th:each="member: ${memberList}">
						<td th:text="${member.memberNo}"></td>
						<td th:text="${member.name}"></td>
						<td th:text="${member.id}"></td>
						<td th:text="${member.addr}"></td>
						<td th:text="${member.email}"></td>
						<td th:text="${member.phone}"></td>
						<td th:text="${member.point}"></td>
						<td th:text="${member.mbti}"></td>
					</tr>
				</tbody>
			</table>
			<br>
		</div>
		<!-- 페이징 처리 -->
		<div class="container">
			<span th:if="${startPage>1}"> <a
				th:href="@{'/admin/memberManage/?pageNUM='+${startPage-1}}"
				th:text="[이전]"></a>&nbsp;&nbsp;
			</span> <span th:each="t:${#numbers.sequence(startPage,endPage)}"> <a
				th:href="@{'/admin/memberManage/?pageNUM='+${t}}" th:text="${t}"></a>&nbsp;&nbsp;
			</span> <span th:if="${endPage < total}"> <a
				th:href="@{'/admin/memberManage/?pageNUM='+${endPage+1}}"
				th:text="[다음]"></a>&nbsp;&nbsp;
			</span>
		</div>
		<hr>
		<div>
			<input type="radio" name="member_check" id="reservation" value="reservation"> 예약 &nbsp;&nbsp; 
			<input type="radio" name="member_check" id="review" value="review"> 리뷰

			<hr>

			<table id="review_table" border="1" width="70%">
				<thead>
					<tr>
						<th>번호</th>
						<th>내용</th>
						<th>카테고리</th>
						<th>별점</th>
					</tr>
				</thead>
				<tbody class="review_info">
				
				</tbody>
			</table>
		</div>

<hr>
<hr>
		<!-- =============================================================================================================  -->
		<div id="footers">footer</div>
	</div>
</body>
</html>